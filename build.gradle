apply plugin: 'idea'
apply plugin: 'groovy'
apply plugin: 'application'

description = ""
version = '0.0.1'
mainClassName = 'com.dreadjr.glisten.flow.FlowWorkflowHost'

//jar {
//  manifest {
//    attributes 'Main-Class': 'com.dreadjr.glisten.flow.FlowWorkflowHost'
//  }
//}

repositories {
  mavenCentral()
}

//sourceSets {
//  main {
//    groovy {
//      srcDir 'src'
//      exclude '**/netflix/**'
//    }
//  }
//}

dependencies {
//  groovy 'org.codehaus.groovy:groovy-all:2.3.3'
  compile 'org.codehaus.groovy:groovy-all:2.3.3'
  compile 'com.netflix.glisten:glisten:0.3'
  compile 'log4j:log4j:1.2.17'

  testCompile 'org.spockframework:spock-core:0.7-groovy-2.0'
  testCompile 'cglib:cglib-nodep:3.1'
  testCompile 'org.mockito:mockito-all:1.9.5'
}

task uberjar(type: Jar,dependsOn:[':compileJava',':compileGroovy']) {
  from files(sourceSets.main.output.classesDir)
  from configurations.runtime.asFileTree.files.collect { zipTree(it) }

  from "src/main/resources/Log4jConfig.groovy"

  manifest {
    attributes 'Main-Class': mainClassName
  }
}